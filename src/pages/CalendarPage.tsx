import Guard from '@/components/Guard';import { useState,useEffect } from 'react';import { api } from '@/lib/api';import { useAuth } from '@/lib/auth';export default function CalendarPage(){const session=useAuth(s=>s.session)!;const[form,setForm]=useState<any>({type:'Other'});const[rows,setRows]=useState<any[]>([]);async function load(){const r=await api.list('calendar');setRows(r.rows||[])}useEffect(()=>{load()},[]);async function save(){await api.create('calendar',{...form,_by:session.name});setForm({type:'Other'});await load()}return(<Guard area='Calendar'><div className='max-w-6xl mx-auto p-6 space-y-4'><div className='title'>Calendar</div><div className='card grid sm:grid-cols-4 gap-2'><input className='input sm:col-span-2' placeholder='Title' value={form.title||''} onChange={e=>setForm({...form,title:e.target.value})}/><select className='input' value={form.type||'Other'} onChange={e=>setForm({...form,type:e.target.value})}><option>Content</option><option>Campaign</option><option>Meeting</option><option>Outreach</option><option>Other</option></select><input className='input' type='date' value={form.date||''} onChange={e=>setForm({...form,date:e.target.value})}/><input className='input' placeholder='Start (e.g., 10:00)' value={form.start_time||''} onChange={e=>setForm({...form,start_time:e.target.value})}/><input className='input' placeholder='End (e.g., 11:00)' value={form.end_time||''} onChange={e=>setForm({...form,end_time:e.target.value})}/><input className='input' placeholder='Assigned to' value={form.assigned_to||''} onChange={e=>setForm({...form,assigned_to:e.target.value})}/><input className='input sm:col-span-2' placeholder='Link' value={form.link||''} onChange={e=>setForm({...form,link:e.target.value})}/><input className='input sm:col-span-4' placeholder='Notes' value={form.notes||''} onChange={e=>setForm({...form,notes:e.target.value})}/><div className='sm:col-span-4 flex justify-end'><button className='btn btn-primary' onClick={save}>Add to Calendar</button></div></div><div className='grid md:grid-cols-2 gap-3'>{rows.map(r=>(<div key={r.id} className='pill'><div className='pill-title'>{r.date} • {r.title}</div><div className='pill-meta mt-1'>{r.type} • {r.start_time||''}-{r.end_time||''} • {r.assigned_to||''}</div></div>))}</div></div></Guard>)}